<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö—Ä–∞—Ñ—Ç –•–∞–± –ú–µ–Ω—é</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #fff);
            --hint-color: var(--tg-theme-hint-color, #999);
            --text-color: var(--tg-theme-text-color, #000);
            --button-color: var(--tg-theme-button-color, #3390ec);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--secondary-bg);
            color: var(--text-color);
            margin: 0; padding: 0;
            user-select: none;
        }

        header {
            background: var(--bg-color);
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 10;
        }

        .menu-container { padding: 10px; padding-bottom: 80px; }

        .item-card {
            background: var(--bg-color);
            border-radius: 16px;
            display: flex;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.03);
            transition: transform 0.1s;
        }

        .item-card:active { transform: scale(0.98); }

        .item-img {
            width: 100px; height: 100px;
            border-radius: 12px;
            object-fit: cover;
            margin-right: 12px;
            background: #eee;
        }

        .item-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }

        .item-title { font-weight: 700; font-size: 17px; margin-bottom: 4px; }

        .item-desc {
            font-size: 13px;
            color: var(--hint-color);
            line-height: 1.3;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .item-footer { display: flex; justify-content: space-between; align-items: center; }

        .item-price { font-weight: 800; font-size: 16px; color: var(--button-color); }

        .add-btn {
            background: var(--button-color);
            color: #fff;
            border: none;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        .counter { display: none; align-items: center; gap: 12px; font-weight: bold; }
        .counter-btn { width: 28px; height: 28px; border-radius: 50%; border: 1.5px solid var(--button-color); 
                       background: none; color: var(--button-color); font-size: 18px; line-height: 1; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 800; font-size: 20px;">–ö—Ä–∞—Ñ—Ç –•–∞–± üç∫</div>
</header>

<div class="menu-container" id="menu">
    </div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const menuItems = [
        { id: 'set_2', title: '–°–µ—Ç 2', price: 790, desc: '–ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–µ —á–∏–ø—Å—ã, —Å—ã—Ä–Ω—ã–µ —à–∞—Ä–∏–∫–∏, –ª—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞, –∫–æ–ª—å—Ü–∞ –∫–∞–ª—å–º–∞—Ä–∞, —Å–æ—É—Å —Ç–∞—Ä-—Ç–∞—Ä' },
        { id: 'set_3', title: '–°–µ—Ç 3', price: 1150, desc: '–†–µ–±—Ä–∞ —Å–≤–∏–Ω–∏–Ω–∞, 4 –≤–∏–¥–∞ –∫–æ–ª–±–∞—Å–æ–∫, –≥—Ä–µ–Ω–∫–∏, —Å–æ—É—Å –±–∞—Ä–±–µ–∫—é' },
        { id: 'set_1', title: '–°–µ—Ç 1', price: 1550, desc: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏, —Å—É–¥–∂—É–∫, –º—è—Å–Ω—ã–µ —á–∏–ø—Å—ã —Å–≤–∏–Ω–∏–Ω–∞ –∏ –∫—É—Ä–∏—Ü–∞, –≥—Ä–µ–Ω–∫–∏, –∫—É—Ä–∏–Ω—ã–µ –∫—Ä—ã–ª—ã—à–∫–∏' },
        { id: 'barabulka', title: '–ë–∞—Ä–∞–±—É–ª—å–∫–∞', price: 490, desc: '–ñ–∞—Ä–µ–Ω–∞—è –±–∞—Ä–∞–±—É–ª—å–∫–∞ (–ø–æ—Ä—Ü–∏—è)' },
        { id: 'set_4', title: '–°–µ—Ç 4', price: 850, desc: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ —á–∏–ø—Å—ã, —Å—É–¥–∂—É–∫, –∞—Ä–∞—Ö–∏—Å, —Ñ–∏—Å—Ç–∞—à–∫–∏' }
    ];

    let cart = {};

    function renderMenu() {
        const container = document.getElementById('menu');
        container.innerHTML = menuItems.map(item => `
            <div class="item-card">
                <div class="item-img" style="background-image: url('https://via.placeholder.com/100?text=Food'); background-size: cover;"></div>
                <div class="item-info">
                    <div>
                        <div class="item-title">${item.title}</div>
                        <div class="item-desc">${item.desc}</div>
                    </div>
                    <div class="item-footer">
                        <div class="item-price">${item.price} ‚ÇΩ</div>
                        <button class="add-btn" id="btn-${item.id}" onclick="addToCart('${item.id}')">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                        <div class="counter" id="count-${item.id}">
                            <button class="counter-btn" onclick="updateCount('${item.id}', -1)">‚àí</button>
                            <span id="num-${item.id}">0</span>
                            <button class="counter-btn" onclick="updateCount('${item.id}', 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function addToCart(id) {
        cart[id] = 1;
        document.getElementById('btn-' + id).style.display = 'none';
        document.getElementById('count-' + id).style.display = 'flex';
        document.getElementById('num-' + id).innerText = '1';
        updateMainButton();
    }

    function updateCount(id, delta) {
        cart[id] = (cart[id] || 0) + delta;
        if (cart[id] <= 0) {
            delete cart[id];
            document.getElementById('btn-' + id).style.display = 'block';
            document.getElementById('count-' + id).style.display = 'none';
        } else {
            document.getElementById('num-' + id).innerText = cart[id];
        }
        updateMainButton();
    }

    function updateMainButton() {
        let total = 0;
        let count = 0;
        for (const id in cart) {
            const item = menuItems.find(i => i.id === id);
            total += item.price * cart[id];
            count += cart[id];
        }

        if (count > 0) {
            tg.MainButton.text = `–ó–∞–∫–∞–∑–∞—Ç—å (${total} ‚ÇΩ)`;
            tg.MainButton.show();
        } else {
            tg.MainButton.hide();
        }
    }

    tg.onEvent('mainButtonClicked', function() {
        const orderData = {
            cart: cart,
            totalPrice: document.querySelector('.item-price').innerText // –£–ø—Ä–æ—â–µ–Ω–Ω–æ
        };
        tg.sendData(JSON.stringify(cart)); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ ID –∏ –∫–æ–ª-–≤–æ –≤ –±–æ—Ç
    });

    renderMenu();
</script>

</body>
</html>
