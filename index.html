<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö—Ä–∞—Ñ—Ç –•–∞–± ‚Äî –ú–µ–Ω—é –∏ –ü—Ä–µ–¥–∑–∞–∫–∞–∑</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #fff);
            --hint-color: var(--tg-theme-hint-color, #999);
            --text-color: var(--tg-theme-text-color, #000);
            --button-color: var(--tg-theme-button-color, #3390ec);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--secondary-bg);
            color: var(--text-color);
            margin: 0; padding: 0;
        }

        header {
            background: var(--bg-color);
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(0,0,0,0.08);
            position: sticky; top: 0; z-index: 10;
        }

        .order-options {
            background: var(--bg-color);
            margin: 10px;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .order-options label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .order-options select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.1);
            background: var(--secondary-bg);
            color: var(--text-color);
            font-size: 16px;
        }

        .menu-container { padding: 10px; padding-bottom: 100px; }

        .item-card {
            background: var(--bg-color);
            border-radius: 16px;
            display: flex;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.03);
        }

        .item-img {
            width: 90px; height: 90px;
            border-radius: 12px;
            background: #eee;
            margin-right: 12px;
            background-size: cover;
            background-position: center;
        }

        .item-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .item-title { font-weight: 700; font-size: 16px; }
        .item-desc { font-size: 12px; color: var(--hint-color); margin: 4px 0; line-height: 1.2; }
        .item-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
        .item-price { font-weight: 800; color: var(--button-color); }

        .add-btn {
            background: var(--button-color);
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 13px;
        }

        .counter { display: none; align-items: center; gap: 10px; }
        .counter-btn { width: 26px; height: 26px; border-radius: 50%; border: 1px solid var(--button-color); background: none; color: var(--button-color); font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: bold; font-size: 18px;">–ö—Ä–∞—Ñ—Ç –•–∞–± üç∫</div>
</header>

<div class="order-options">
    <label>üïí –ö–æ–≥–¥–∞ –ø–æ–¥–∞—Ç—å –±–ª—é–¥–∞?</label>
    <select id="order-time">
        <option value="üçΩ –ö –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Å—Ç–æ–ª–∏–∫—É">–ö –º–æ–µ–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é</option>
        <option value="üöÄ –ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
        <option value="18:00">18:00</option>
        <option value="19:00">19:00</option>
        <option value="20:00">20:00</option>
        <option value="21:00">21:00</option>
    </select>
</div>

<div class="menu-container" id="menu-list"></div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const menuItems = [
        { id: 'set_1', title: '–°–µ—Ç 1', price: 1550, desc: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏, —Å—É–¥–∂—É–∫, –º—è—Å–Ω—ã–µ —á–∏–ø—Å—ã, –≥—Ä–µ–Ω–∫–∏, –∫—Ä—ã–ª—ã—à–∫–∏' },
        { id: 'set_2', title: '–°–µ—Ç 2', price: 790, desc: '–ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–µ —á–∏–ø—Å—ã, —Å—ã—Ä–Ω—ã–µ —à–∞—Ä–∏–∫–∏, –ª—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞, –∫–∞–ª—å–º–∞—Ä, —Ç–∞—Ä-—Ç–∞—Ä' },
        { id: 'set_3', title: '–°–µ—Ç 3', price: 1150, desc: '–†–µ–±—Ä–∞ —Å–≤–∏–Ω–∏–Ω–∞, 4 –≤–∏–¥–∞ –∫–æ–ª–±–∞—Å–æ–∫, –≥—Ä–µ–Ω–∫–∏, –±–∞—Ä–±–µ–∫—é' },
        { id: 'set_4', title: '–°–µ—Ç 4', price: 850, desc: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏, —á–∏–ø—Å—ã, —Å—É–¥–∂—É–∫, –∞—Ä–∞—Ö–∏—Å, —Ñ–∏—Å—Ç–∞—à–∫–∏' },
        { id: 'barabulka', title: '–ë–∞—Ä–∞–±—É–ª—å–∫–∞', price: 490, desc: '–ñ–∞—Ä–µ–Ω–∞—è –±–∞—Ä–∞–±—É–ª—å–∫–∞ (–ø–æ—Ä—Ü–∏—è)' }
    ];

    let cart = {};

    function render() {
        const list = document.getElementById('menu-list');
        list.innerHTML = menuItems.map(item => `
            <div class="item-card">
                <div class="item-img" style="background-image: url('https://via.placeholder.com/100?text=Food')"></div>
                <div class="item-info">
                    <div class="item-title">${item.title}</div>
                    <div class="item-desc">${item.desc}</div>
                    <div class="item-footer">
                        <div class="item-price">${item.price} ‚ÇΩ</div>
                        <button class="add-btn" id="btn-${item.id}" onclick="change('${item.id}', 1)">–î–æ–±–∞–≤–∏—Ç—å</button>
                        <div class="counter" id="cnt-${item.id}">
                            <button class="counter-btn" onclick="change('${item.id}', -1)">-</button>
                            <span id="num-${item.id}">0</span>
                            <button class="counter-btn" onclick="change('${item.id}', 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function change(id, delta) {
        cart[id] = (cart[id] || 0) + delta;
        if (cart[id] <= 0) {
            delete cart[id];
            document.getElementById('btn-'+id).style.display = 'block';
            document.getElementById('cnt-'+id).style.display = 'none';
        } else {
            document.getElementById('btn-'+id).style.display = 'none';
            document.getElementById('cnt-'+id).style.display = 'flex';
            document.getElementById('num-'+id).innerText = cart[id];
        }
        updateMainButton();
    }

    function updateMainButton() {
        let total = 0;
        for (const id in cart) {
            const item = menuItems.find(i => i.id === id);
            total += item.price * cart[id];
        }
        if (total > 0) {
            tg.MainButton.text = `–ó–ê–ö–ê–ó–ê–¢–¨ (${total} ‚ÇΩ)`;
            tg.MainButton.show();
        } else {
            tg.MainButton.hide();
        }
    }

    tg.onEvent('mainButtonClicked', function() {
        let order = [];
        let total = 0;
        for (const id in cart) {
            const item = menuItems.find(i => i.id === id);
            order.push({ title: item.title, count: cart[id], price: item.price * cart[id] });
            total += item.price * cart[id];
        }
        const data = {
            order: order,
            totalPrice: total,
            time: document.getElementById('order-time').value
        };
        tg.sendData(JSON.stringify(data));
    });

    render();
</script>
</body>
</html>
