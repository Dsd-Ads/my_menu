<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö—Ä–∞—Ñ—Ç –•–∞–± ‚Äî –ú–µ–Ω—é</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #fff);
            --hint-color: var(--tg-theme-hint-color, #999);
            --text-color: var(--tg-theme-text-color, #000);
            --button-color: var(--tg-theme-button-color, #3390ec);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--secondary-bg);
            color: var(--text-color);
            margin: 0; padding: 0;
            scroll-behavior: smooth; /* –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
        }

        header {
            background: var(--bg-color);
            padding: 15px 15px 5px;
            text-align: center;
            position: sticky; top: 0; z-index: 20;
        }

        /* –ü–ê–ù–ï–õ–¨ –ö–ê–¢–ï–ì–û–†–ò–ô (–ë–´–°–¢–†–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø) */
        .category-nav {
            display: flex;
            overflow-x: auto;
            background: var(--bg-color);
            padding: 10px;
            gap: 8px;
            position: sticky;
            top: 48px; /* –°—Ä–∞–∑—É –ø–æ–¥ —Ö–µ–¥–µ—Ä–æ–º */
            z-index: 19;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            -webkit-overflow-scrolling: touch;
        }

        .category-nav::-webkit-scrollbar { display: none; } /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–æ—Å—É –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */

        .nav-item {
            white-space: nowrap;
            padding: 8px 16px;
            background: var(--secondary-bg);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-color);
            text-decoration: none;
            transition: 0.2s;
        }

        .nav-item.active {
            background: var(--button-color);
            color: #fff;
        }

        .category-section {
            padding-top: 10px; /* –ß—Ç–æ–±—ã –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –∑–∞–µ–∑–∂–∞–ª –ø–æ–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏—é */
        }

        .category-title {
            padding: 20px 15px 10px;
            font-size: 18px;
            font-weight: 800;
            color: var(--button-color);
            text-transform: uppercase;
        }

        .order-options {
            background: var(--bg-color);
            margin: 10px;
            padding: 15px;
            border-radius: 12px;
        }

        .menu-container { padding: 0 10px 10px; }

        .item-card {
            background: var(--bg-color);
            border-radius: 16px;
            display: flex;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.03);
        }

        .item-img {
            width: 80px; height: 80px;
            border-radius: 12px;
            background: #eee;
            margin-right: 12px;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
        }

        .item-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .item-title { font-weight: 700; font-size: 15px; }
        .item-desc { font-size: 12px; color: var(--hint-color); margin: 4px 0; }
        .item-footer { display: flex; justify-content: space-between; align-items: center; }
        .item-price { font-weight: 800; color: var(--button-color); }

        .add-btn {
            background: var(--button-color);
            color: #fff;
            border: none;
            padding: 6px 14px;
            border-radius: 15px;
            font-weight: 600;
        }

        .counter { display: none; align-items: center; gap: 10px; }
        .counter-btn { width: 28px; height: 28px; border-radius: 50%; border: 1px solid var(--button-color); background: none; color: var(--button-color); font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: bold; font-size: 18px;">–ö—Ä–∞—Ñ—Ç –•–∞–± üç∫</div>
</header>

<div class="category-nav" id="cat-nav"></div>

<div class="order-options">
    <label style="font-size: 12px; font-weight: bold;">üïí –ü–û–î–ê–ß–ê:</label>
    <select id="order-time" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #ddd; margin-top: 5px;">
        <option value="üçΩ –ö –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Å—Ç–æ–ª–∏–∫—É">–ö –º–æ–µ–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é</option>
        <option value="üöÄ –ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
    </select>
</div>

<div id="menu-content"></div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const categories = {
        'sets': '–°–µ—Ç—ã',
        'snacks': '–ó–∞–∫—É—Å–∫–∏'
    };

    const menuItems = [
        { id: 'set1', iiko_id: '', img: '', title: '–°–µ—Ç 1', price: 1550, category: 'sets', desc: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏, —Å—É–¥–∂—É–∫, –º—è—Å–Ω—ã–µ —á–∏–ø—Å—ã, –≥—Ä–µ–Ω–∫–∏, –∫—Ä—ã–ª—å—è' },
        { id: 'set2', iiko_id: '', img: '', title: '–°–µ—Ç 2', price: 790, category: 'sets', desc: '–ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–µ —á–∏–ø—Å—ã, —à–∞—Ä–∏–∫–∏, –∫–æ–ª—å—Ü–∞, —Ç–∞—Ä-—Ç–∞—Ä' },
        { id: 'set3', iiko_id: '', img: '', title: '–°–µ—Ç 3', price: 1150, category: 'sets', desc: '–†–µ–±—Ä–∞, 4 –≤–∏–¥–∞ –∫–æ–ª–±–∞—Å–æ–∫, –≥—Ä–µ–Ω–∫–∏, —Å–æ—É—Å BBQ' },
        { id: 'set4', iiko_id: '', img: '', title: '–°–µ—Ç 4', price: 850, category: 'sets', desc: '–ù–∏—Ç–∏, —á–∏–ø—Å—ã, —Å—É–¥–∂—É–∫, –∞—Ä–∞—Ö–∏—Å, —Ñ–∏—Å—Ç–∞—à–∫–∏' },
        { id: 'chips', iiko_id: '', img: '', title: '–ß–∏–ø—Å—ã (30–≥)', price: 130, category: 'snacks' },
        { id: 'shrimp_chips', iiko_id: '', img: '', title: '–ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–µ —á–∏–ø—Å—ã', price: 120, category: 'snacks' },
        { id: 'croutons', iiko_id: '', img: '', title: '–ì—Ä–µ–Ω–∫–∏', price: 180, category: 'snacks' },
        { id: 'cheese_threads', iiko_id: '', img: '', title: '–°—ã—Ä–Ω—ã–µ –Ω–∏—Ç–∏', price: 180, category: 'snacks' },
        { id: 'cheese_balls', iiko_id: '', img: '', title: '–°—ã—Ä–Ω—ã–µ —à–∞—Ä–∏–∫–∏', price: 230, category: 'snacks' },
        { id: 'meat_chips_pork', iiko_id: '', img: '', title: '–ú—è—Å–Ω—ã–µ —á–∏–ø—Å—ã (—Å–≤)', price: 260, category: 'snacks' },
        { id: 'meat_chips_chicken', iiko_id: '', img: '', title: '–ú—è—Å–Ω—ã–µ —á–∏–ø—Å—ã (–∫—É—Ä)', price: 260, category: 'snacks' },
        { id: 'sudzhuk', iiko_id: '', img: '', title: '–°—É–¥–∂—É–∫', price: 360, category: 'snacks' },
        { id: 'peanuts', iiko_id: '', img: '', title: '–ê—Ä–∞—Ö–∏—Å', price: 390, category: 'snacks' },
        { id: 'pistachios', iiko_id: '', img: '', title: '–§–∏—Å—Ç–∞—à–∫–∏', price: 390, category: 'snacks' },
        { id: 'wings', iiko_id: '', img: '', title: '–ö—Ä—ã–ª—å—è', price: 420, category: 'snacks' },
        { id: 'ribs', iiko_id: '', img: '', title: '–†—ë–±—Ä—ã—à–∫–∏', price: 560, category: 'snacks' },
        { id: 'sausages', iiko_id: '', img: '', title: '–ö–æ–ª–±–∞—Å–∫–∏', price: 570, category: 'snacks' },
        { id: 'onion_rings_6', iiko_id: '', img: '', title: '–õ—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞ (6)', price: 210, category: 'snacks' },
        { id: 'onion_rings_10', iiko_id: '', img: '', title: '–õ—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞ (10)', price: 310, category: 'snacks' },
        { id: 'squid_rings_6', iiko_id: '', img: '', title: '–ö–æ–ª—å—Ü–∞ –∫–∞–ª—å–º–∞—Ä–∞ (6)', price: 360, category: 'snacks' },
        { id: 'squid_rings_10', iiko_id: '', img: '', title: '–ö–æ–ª—å—Ü–∞ –∫–∞–ª—å–º–∞—Ä–∞ (10)', price: 540, category: 'snacks' },
        { id: 'shrimp_snack', iiko_id: '', img: 'https://via.placeholder.com/100', title: '–ö—Ä–µ–≤–µ—Ç–∫–∏', price: 560, category: 'snacks' }
    ];

    let cart = {};

    function init() {
        const nav = document.getElementById('cat-nav');
        const content = document.getElementById('menu-content');
        
        for (const [id, name] of Object.entries(categories)) {
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            nav.innerHTML += `<a href="#cat-${id}" class="nav-item" onclick="setActive(this)">${name}</a>`;
            
            // –°–æ–∑–¥–∞–µ–º —Å–µ–∫—Ü–∏—é –º–µ–Ω—é
            const items = menuItems.filter(i => i.category === id);
            let itemsHtml = items.map(item => `
                <div class="item-card">
                    <div class="item-img" style="background-image: url('${item.img || 'https://via.placeholder.com/100'}')"></div>
                    <div class="item-info">
                        <div class="item-title">${item.title}</div>
                        <div class="item-desc">${item.desc || ''}</div>
                        <div class="item-footer">
                            <div class="item-price">${item.price} ‚ÇΩ</div>
                            <button class="add-btn" id="btn-${item.id}" onclick="change('${item.id}', 1)">–î–æ–±–∞–≤–∏—Ç—å</button>
                            <div class="counter" id="cnt-${item.id}">
                                <button class="counter-btn" onclick="change('${item.id}', -1)">-</button>
                                <span id="num-${item.id}">0</span>
                                <button class="counter-btn" onclick="change('${item.id}', 1)">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            content.innerHTML += `
                <div id="cat-${id}" class="category-section">
                    <div class="category-title">${name}</div>
                    <div class="menu-container">${itemsHtml}</div>
                </div>`;
        }
    }

    function setActive(el) {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
    }

    function change(id, delta) {
        cart[id] = (cart[id] || 0) + delta;
        const btn = document.getElementById('btn-'+id);
        const cnt = document.getElementById('cnt-'+id);
        if (cart[id] <= 0) {
            delete cart[id];
            btn.style.display = 'block';
            cnt.style.display = 'none';
        } else {
            btn.style.display = 'none';
            cnt.style.display = 'flex';
            document.getElementById('num-'+id).innerText = cart[id];
        }
        updateMainButton();
    }

    function updateMainButton() {
        let total = 0;
        for (const id in cart) {
            total += menuItems.find(i => i.id === id).price * cart[id];
        }
        if (total > 0) {
            tg.MainButton.setText(`–ó–ê–ö–ê–ó–ê–¢–¨ (${total} ‚ÇΩ)`);
            tg.MainButton.show();
        } else {
            tg.MainButton.hide();
        }
    }

    tg.onEvent('mainButtonClicked', () => {
        let order = [];
        for (const id in cart) {
            const item = menuItems.find(i => i.id === id);
            order.push({ title: item.title, count: cart[id], price: item.price, iiko_id: item.iiko_id });
        }
        tg.sendData(JSON.stringify({ order: order, time: document.getElementById('order-time').value }));
    });

    init();
</script>
</body>
</html>
